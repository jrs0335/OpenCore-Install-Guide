<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>系统调试:深入 | OpenCore安装指南</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="&#39;stylesheet" href="/OpenCore-Install-Guide/styles/website.css">
    <meta name="description" content="中文版OpenCore安装指南">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/OpenCore-Install-Guide/assets/css/0.styles.afed0247.css" as="style"><link rel="preload" href="/OpenCore-Install-Guide/assets/js/app.94d52619.js" as="script"><link rel="preload" href="/OpenCore-Install-Guide/assets/js/2.f12e51c6.js" as="script"><link rel="preload" href="/OpenCore-Install-Guide/assets/js/8.f75ba59f.js" as="script"><link rel="preload" href="/OpenCore-Install-Guide/assets/js/58.29b7a45b.js" as="script"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/10.48ec6fce.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/11.d255a433.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/12.0b1bb129.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/13.d572f8ae.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/14.9008cfa4.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/15.a4f1e5cd.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/16.e46c4c74.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/17.e6f88049.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/18.f8a68dcb.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/19.e577189a.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/20.65cbbd6f.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/21.dab1c25c.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/22.7a051e85.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/23.32c69547.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/24.172015e1.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/25.f41a55d8.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/26.328737a7.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/27.c8eadfbd.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/28.28defb29.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/29.56bacc20.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/3.3c610068.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/30.8805a47e.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/31.df03a12a.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/32.5a4324ea.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/33.6d80b6a1.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/34.7598ad44.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/35.2c273995.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/36.50a74693.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/37.dacc3afa.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/38.4d50a598.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/39.b3afc75a.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/4.8b455194.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/40.4dfae04b.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/41.60cdfb2c.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/42.5b8516c8.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/43.2c3028d0.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/44.7cb2ce56.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/45.d0f20290.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/46.2e30db4c.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/47.4b5ab4e4.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/48.97bf7827.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/49.41ebb882.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/5.ff1c8423.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/50.ad47f335.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/51.7b3c9c37.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/52.6e41d7d0.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/53.24199098.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/54.d7f773ac.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/55.6b63c6a3.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/56.34efd759.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/57.38808caf.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/59.03340549.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/6.81ade0a8.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/60.90613360.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/61.9bad8401.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/62.7725b64f.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/63.3f024771.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/64.ea751565.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/65.5cb6d38c.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/66.0677f039.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/67.2d8cadcd.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/68.34b8a3bc.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/69.57ed92c2.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/7.db87a3fc.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/70.f910012c.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/71.30eafcb0.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/72.f6485853.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/73.396d9d69.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/74.c46c1962.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/75.a9053fac.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/76.4d887d61.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/77.24203934.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/78.1f9239a4.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/79.39928f9c.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/80.8f3aba9f.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/81.fe986f09.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/82.087923e1.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/83.a527df7f.js"><link rel="prefetch" href="/OpenCore-Install-Guide/assets/js/9.5310d381.js">
    <link rel="stylesheet" href="/OpenCore-Install-Guide/assets/css/0.styles.afed0247.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/OpenCore-Install-Guide/" class="home-link router-link-active"><img src="/OpenCore-Install-Guide/homepage.png" alt="OpenCore安装指南" class="logo"> <span class="site-name can-hide">OpenCore安装指南</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南菜单" class="dropdown-title"><span class="title">指南菜单</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南菜单" class="mobile-dropdown-title"><span class="title">指南菜单</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/OpenCore-Install-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主页面
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ACPI入门
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/OpenCore-Post-Install/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore安装后
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/OpenCore-Multiboot/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore多引导
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/GPU-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  显卡购买指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/Wireless-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  无线网卡购买指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/Anti-Hackintosh-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  避免购买指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OpenCore-Install-Guide/troubleshooting/kernel-debugging.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/OpenCore-Install-Guide/zh/" class="nav-link">
  English
</a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/sumingyd/OpenCore-Install-Guide" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南菜单" class="dropdown-title"><span class="title">指南菜单</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南菜单" class="mobile-dropdown-title"><span class="title">指南菜单</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/OpenCore-Install-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主页面
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ACPI入门
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/OpenCore-Post-Install/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore安装后
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/OpenCore-Multiboot/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore多引导
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/GPU-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  显卡购买指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/Wireless-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  无线网卡购买指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sumingyd.github.io/Anti-Hackintosh-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  避免购买指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OpenCore-Install-Guide/troubleshooting/kernel-debugging.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/OpenCore-Install-Guide/zh/" class="nav-link">
  English
</a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/sumingyd/OpenCore-Install-Guide" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Install-Guide/prerequisites.html" class="sidebar-link">OpenCore入门</a></li><li><a href="/OpenCore-Install-Guide/macos-limits.html" class="sidebar-link">硬件限制</a></li><li><a href="/OpenCore-Install-Guide/find-hardware.html" class="sidebar-link">查找你的硬件</a></li><li><a href="/OpenCore-Install-Guide/terminology.html" class="sidebar-link">术语</a></li><li><a href="/OpenCore-Install-Guide/why-oc.html" class="sidebar-link">为什么OpenCore超过Clover和其他公司</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>制作引导U盘</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/OpenCore-Install-Guide/installer-guide/" class="sidebar-heading clickable open"><span>制作引导U盘</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Install-Guide/installer-guide/mac-install.html" class="sidebar-link">在macOS中制作安装程序</a></li><li><a href="/OpenCore-Install-Guide/installer-guide/windows-install.html" class="sidebar-link">在 Windows 中制作安装程序</a></li><li><a href="/OpenCore-Install-Guide/installer-guide/linux-install.html" class="sidebar-link">在 Linux 中制作安装程序</a></li></ul></section></li><li><a href="/OpenCore-Install-Guide/installer-guide/opencore-efi.html" class="sidebar-link">添加基础OpenCore文件</a></li><li><a href="/OpenCore-Install-Guide/ktext.html" class="sidebar-link">收集文件</a></li><li><a href="https://sumingyd.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreferrer" class="sidebar-link">ACPI入门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/OpenCore-Install-Guide/config.plist/" class="sidebar-link">config.plist 设置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>配置</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Intel 台式电脑配置文件</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Install-Guide/config.plist/penryn.html" class="sidebar-link">Penryn</a></li><li><a href="/OpenCore-Install-Guide/config.plist/clarkdale.html" class="sidebar-link">Clarkdale</a></li><li><a href="/OpenCore-Install-Guide/config.plist/sandy-bridge.html" class="sidebar-link">Sandy Bridge</a></li><li><a href="/OpenCore-Install-Guide/config.plist/ivy-bridge.html" class="sidebar-link">Ivy Bridge</a></li><li><a href="/OpenCore-Install-Guide/config.plist/haswell.html" class="sidebar-link">Haswell</a></li><li><a href="/OpenCore-Install-Guide/config.plist/skylake.html" class="sidebar-link">Skylake</a></li><li><a href="/OpenCore-Install-Guide/config.plist/kaby-lake.html" class="sidebar-link">Kaby Lake</a></li><li><a href="/OpenCore-Install-Guide/config.plist/coffee-lake.html" class="sidebar-link">Coffee Lake</a></li><li><a href="/OpenCore-Install-Guide/config.plist/comet-lake.html" class="sidebar-link">Comet Lake</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Intel 笔记本电脑配置文件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Intel HEDT配置文件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>AMD 台式电脑配置文件</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/OpenCore-Install-Guide/config.plist/security.html" class="sidebar-link">苹果安全启动</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>安装</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Install-Guide/installation/installation-process.html" class="sidebar-link">安装过程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>故障排除</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Install-Guide/troubleshooting/troubleshooting.html" class="sidebar-link">一般故障处理</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Install-Guide/troubleshooting/extended/opencore-issues.html" class="sidebar-link">OpenCore启动问题</a></li><li><a href="/OpenCore-Install-Guide/troubleshooting/extended/kernel-issues.html" class="sidebar-link">内核空间问题</a></li><li><a href="/OpenCore-Install-Guide/troubleshooting/extended/userspace-issues.html" class="sidebar-link">用户空间问题</a></li><li><a href="/OpenCore-Install-Guide/troubleshooting/extended/post-issues.html" class="sidebar-link">安装后的问题</a></li><li><a href="/OpenCore-Install-Guide/troubleshooting/extended/misc-issues.html" class="sidebar-link">杂项问题</a></li></ul></section></li><li><a href="/OpenCore-Install-Guide/troubleshooting/debug.html" class="sidebar-link">OpenCore调试</a></li><li><a href="/OpenCore-Install-Guide/troubleshooting/boot.html" class="sidebar-link">了解macOS引导过程</a></li><li><a href="/OpenCore-Install-Guide/troubleshooting/kernel-debugging.html" aria-current="page" class="active sidebar-link">系统调试:深入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/OpenCore-Install-Guide/troubleshooting/kernel-debugging.html#efi-设置" class="sidebar-link">EFI 设置</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Install-Guide/troubleshooting/kernel-debugging.html#config-plist-设置" class="sidebar-link">Config.plist 设置</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Install-Guide/troubleshooting/kernel-debugging.html#串行设置-可选" class="sidebar-link">串行设置(可选)</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Install-Guide/troubleshooting/kernel-debugging.html#内核调试工具包-可选" class="sidebar-link">内核调试工具包(可选)</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>安装后</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="https://sumingyd.github.io/OpenCore-Post-Install/" target="_blank" rel="noopener noreferrer" class="sidebar-link">Post-Install<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>通用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>笔记本电脑</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>美化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>多引导</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>额外</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Install-Guide/extras/kaslr-fix.html" class="sidebar-link">Fixing KASLR slide values</a></li><li><a href="/OpenCore-Install-Guide/extras/spoof.html" class="sidebar-link">Disabling GPU</a></li><li><a href="/OpenCore-Install-Guide/extras/ventura.html" class="sidebar-link">macOS 13: Ventura 系统事项</a></li><li><a href="https://github.com/sumingyd/OpenCore-Install-Guide/tree/master/clover-conversion" target="_blank" rel="noopener noreferrer" class="sidebar-link">Clover Conversion<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/OpenCore-Install-Guide/extras/smbios-support.html" class="sidebar-link">Choosing the right SMBIOS</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Install-Guide/CONTRIBUTING.html" class="sidebar-link">支持指南</a></li><li><a href="/OpenCore-Install-Guide/misc/credit.html" class="sidebar-link">Credits</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-succinct-content content__default"><h1 id="系统调试-深入"><a href="#系统调试-深入" class="header-anchor">#</a> 系统调试:深入</h1> <p>本节将更深入地讨论故障排除，特别关注具有适当调试输出和可选串行设置的更低级的调试。</p> <p><strong>注意</strong>:99%的用户不需要这种级别的调试，这只适用于核心或极端情况。</p> <p></p><div class="table-of-contents"><ul><li><a href="#efi-设置">EFI 设置</a></li><li><a href="#config-plist-设置">Config.plist 设置</a><ul><li><a href="#misc">Misc</a></li><li><a href="#nvram">NVRAM</a></li></ul></li><li><a href="#串行设置-可选">串行设置(可选)</a><ul><li><a href="#硬件设置">硬件设置</a></li><li><a href="#coolterm-设置">CoolTerm 设置</a></li></ul></li><li><a href="#内核调试工具包-可选">内核调试工具包(可选)</a><ul><li><a href="#kdk-on-an-installed-os">KDK on an Installed OS</a></li><li><a href="#uninstalling-the-kdk">Uninstalling the KDK</a></li></ul></li></ul></div><p></p> <h2 id="efi-设置"><a href="#efi-设置" class="header-anchor">#</a> EFI 设置</h2> <p>在大多数情况下，只需要相当小的更改。我们主要推荐的是DEBUG版本的<strong>OpenCore</strong>和所有的<strong>kext</strong>。这可以帮助您获得所有必要的数据，有关OpenCore调试的更多详细信息，请参阅这里: <a href="/OpenCore-Install-Guide/troubleshooting/debug.html">OpenCore调试</a></p> <p>除了使用OpenCore和kexts的DEBUG版本，这些工具也可以提供很大的帮助:</p> <ul><li><p><a href="https://github.com/acidanthera/DebugEnhancer/releases" target="_blank" rel="noopener noreferrer">DebugEnhancer.kext<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>极大地帮助内核调试，同时还修补了 <a href="https://github.com/acidanthera/DebugEnhancer/blob/4495911971011a1a7a0ffe8605d6ca4b341f67d9/DebugEnhancer/kern_dbgenhancer.cpp#L131" target="_blank" rel="noopener noreferrer">kern.msgbuf to 10485760<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，并允许更大的内核日志。</li> <li>注意这个kext不能与内核初始化一起启动，所以早期的日志不会被修补，直到kext在PCI配置阶段之前加载</li></ul></li> <li><p><a href="https://gist.github.com/al3xtjames/39ebea4d615c8aed829109a9ea2cd0b5" target="_blank" rel="noopener noreferrer">SSDT-DBG<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>启用ACPI表中的调试语句，帮助操作系统中的ACPI事件调试</li> <li>注意你需要<a href="https://dortania.github.io/Getting-Started-With-ACPI/Manual/compile.html" target="_blank" rel="noopener noreferrer">编译SSDT<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h2 id="config-plist-设置"><a href="#config-plist-设置" class="header-anchor">#</a> Config.plist 设置</h2> <p>对于串行设置，OpenCore实际上是非常直接的。</p> <h3 id="misc"><a href="#misc" class="header-anchor">#</a> Misc</h3> <h4 id="serial"><a href="#serial" class="header-anchor">#</a> Serial</h4> <ul><li><strong>Init</strong>: YES
<ul><li>从 OpenCore 初始化串口</li> <li>需要将OpenCore日志发送到串口</li></ul></li></ul> <h4 id="debug"><a href="#debug" class="header-anchor">#</a> Debug</h4> <ul><li><strong>Target</strong>: <code>67</code> <ul><li>启用OpenCore调试输出</li> <li><code>Target</code> = <code>75</code>添加额外的串行输出标志(<code>0x08</code>)，如果你<a href="#serial-setup-optional">计划使用串行</a></li> <li>你可以在这里计算你自己的值:<a href="/OpenCore-Install-Guide/troubleshooting/debug.html">OpenCore调试</a></li></ul></li></ul> <h3 id="nvram"><a href="#nvram" class="header-anchor">#</a> NVRAM</h3> <h4 id="boot-args"><a href="#boot-args" class="header-anchor">#</a> boot-args</h4> <p>在这里，我们要设置一些变量来帮助我们调试输出，对于我们来说，我们将使用以下的boot-args:</p> <div class="language- extra-class"><pre class="language-text"><code>-v keepsyms=1 debug=0x12a msgbuf=1048576
</code></pre></div><p>现在让我们来看看每个arg的作用:</p> <ul><li><strong>-v</strong> <ul><li>启用详细输出</li></ul></li> <li><strong>keepsyms=1</strong> <ul><li>确保在内核发生严重故障时保留符号，这对故障排除非常有帮助</li></ul></li> <li><strong>debug=0x12a</strong> <ul><li>Combination of <code>DB_PRT</code> (0x2), <code>DB_KPRT</code> (0x8), <code>DB_SLOG</code> (0x20), and <code>DB_LOG_PI_SCRN</code> (0x100)</li> <li>最新版本XNU的完整列表可以在这里找到: <a href="https://github.com/apple-oss-distributions/xnu/blob/master/osfmk/kern/debug.h" target="_blank" rel="noopener noreferrer">debug.h<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><strong>msgbuf=1048576</strong> <ul><li>设置内核的消息缓冲区大小，这有助于在启动期间获得正确的日志</li> <li>1048576 is 1MB(/1024^2), 如果需要可以更大</li> <li>注意：DebugEnhancer kext不需要，但是对于早期的内核日志，它仍然是必需的</li></ul></li></ul> <p><strong>其他有用的boot-args</strong>:</p> <p>根据你正在调试的内容，你可能还会发现这些boot-args非常有用:</p> <ul><li><strong>-liludbgall</strong> <ul><li>在Lilu和任何其他插件上启用调试，但请注意，这需要调试版本的kext</li></ul></li> <li><strong>io=0xff</strong> <ul><li>启用IOKit调试，输出更大。请注意，此参数的日志量将非常大，并将降低系统的速度。尤其是在启动的时候。</li></ul></li> <li><strong>igdebug=0xff</strong> <ul><li>开启iGPU相关的调试，在使用iGPU系统时很有用</li></ul></li> <li><strong>serial=5</strong> <ul><li>将输出重定向到串行如果你<a href="#serial-setup-optional">计划使用串行</a></li> <li>推荐用于PCI配置之前的早期内核输出</li></ul></li> <li><strong>acpi_layer=0x8</strong> <ul><li>启用<code>ACPI_TABLES</code>调试，参见<a href="https://github.com/acpica/acpica/blob/master/source/include/acoutput.h" target="_blank" rel="noopener noreferrer">acoutput.h<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 了解更多信息</li> <li><code>0xFFFFFFFF</code> 也可以启用所有层</li></ul></li> <li><strong>acpi_level=0x2</strong> <ul><li>设置<code>ACPI_LV_DEBUG_OBJECT</code>调试，参见 <a href="https://github.com/acpica/acpica/blob/master/source/include/acoutput.h" target="_blank" rel="noopener noreferrer">acoutput.h<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 了解更多信息</li> <li><code>0xFFFF5F</code> 也可以表示 <code>ACPI_ALL_COMPONENTS</code></li></ul></li></ul> <h2 id="串行设置-可选"><a href="#串行设置-可选" class="header-anchor">#</a> 串行设置(可选)</h2> <ul><li><a href="#hardware-setup">硬件设置</a></li> <li><a href="#efi-setup">EFI 设置</a></li> <li><a href="#config-plist-setup">Config.plist 设置</a></li></ul> <p>虽然是可选的，但串行仍然对抓取所有的信息超级有帮助。这也是正确记录超早期内核崩溃的唯一方法(例如在<code>[EB|# log:EXITBS:START]</code>之后的事情)</p> <p>对于这个设置，你需要一些东西:</p> <ul><li>测试机上的串行头/端口</li> <li>串行到串行或串行到usb电缆</li> <li>第二台机器接收串行日志记录(使用串行或USB)</li> <li>软件监控串行输出
<ul><li>在本指南中，我们将使用 <a href="https://freeware.the-meiers.org" target="_blank" rel="noopener noreferrer">CoolTerm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ,因为它支持macOS, Linux, Windows甚至树莓派</li> <li><code>screen</code> 和其他方法也支持</li></ul></li></ul> <h3 id="硬件设置"><a href="#硬件设置" class="header-anchor">#</a> 硬件设置</h3> <p>对于这个例子，我们将使用华硕X299-E Strix板，它有一个串行头。要确认您的单板是否自带串口，请查看单板的所有者或服务手册，并搜索串口/COM端口:</p> <p><img src="/OpenCore-Install-Guide/assets/img/serial-header.f60954b5.png" alt=""></p> <p>正如你所看到的，我们在主板的底部有一个COM端口，如果你不使用9/10引脚串行头到DB9适配器，甚至为我们手动连接我们的串行引脚提供了一个图表。</p> <p>或者，一些机器在后IO上带有DB9串行端口，例如这台Dell Optiplex 780 SFF(注意VGA和串行<strong>不是</strong>同一个连接器):</p> <img width="508" alt="" src="/OpenCore-Install-Guide/assets/img/serial-connector.6e514758.jpg"> <p>对于我的X299设置，我使用一个简单的 <a href="https://www.amazon.ca/gp/product/B001Y1F0HW/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&amp;psc=1" target="_blank" rel="noopener noreferrer">串行头到DB9<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 然后一个 <a href="https://www.amazon.ca/gp/product/B075YGKFC1/ref=ppx_yo_dt_b_asin_title_o00_s01?ie=UTF8&amp;psc=1" target="_blank" rel="noopener noreferrer">DB9到USB RS 232适配器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 最后终止在我的笔记本电脑:</p> <table><thead><tr><th style="text-align:left;">Serial header to DB9</th> <th style="text-align:left;">DB9 to USB  RS 232 adapter</th></tr></thead> <tbody><tr><td style="text-align:left;"><img src="/OpenCore-Install-Guide/assets/img/817DNdBZDkL._AC_SL1500_.af22055f.jpg" alt=""></td> <td style="text-align:left;"><img src="/OpenCore-Install-Guide/assets/img/61yHczOwpTL._AC_SL1001_.f84613fd.jpg" alt=""></td></tr></tbody></table> <p>OpenCore手册通常建议CP21202-based UART设备:</p> <blockquote><p>要在引导期间获得日志，可以使用串口调试。在目标中打开串口调试，例如0xB表示onscreen with Serial。OpenCore使用115200波特率，8个数据位，无奇偶校验和1个停止位。对于macOS，最好的选择是基于cp2102的UART设备。将主板TX连接到USB UART RX，主板GND连接到USB UART GND。使用屏幕工具获取输出，或者下载GUI软件，比如CoolTerm。
注意:在一些主板(可能是USB UART加密狗)PIN命名可能不正确。GND与RX交换是非常常见的，因此您必须将主板“TX”连接到USB UART GND，并将主板“GND”连接到USB UART RX。</p></blockquote> <p><strong>重要提醒</strong>:不要忘记在BIOS中启用串口，大多数主板默认情况下将禁用它</p> <h3 id="coolterm-设置"><a href="#coolterm-设置" class="header-anchor">#</a> CoolTerm 设置</h3> <p>现在让我们启动<a href="https://freeware.the-meiers.org" target="_blank" rel="noopener noreferrer">CoolTerm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>并设置一些选项。当您打开CoolTerm时，您可能会看到一个简单的窗口。在这里选择选项条目:</p> <p><img src="/OpenCore-Install-Guide/assets/img/coolterm-first-start.9ab65697.png" alt=""> <img src="/OpenCore-Install-Guide/assets/img/coolterm-settings.2c1445fe.png" alt=""></p> <p>这里给出了很多选项，但我们主要关心的是:</p> <ul><li>Port: 确保与您的串行控制器匹配。</li> <li>Baudrate = 115200</li> <li>Data Bits = 8</li> <li>Parity = 无</li> <li>Stop Bit = 1</li></ul> <p>接下来，保存这些设置，并选择Connect条目。这将为你提供一个来自serial的实时日志:</p> <p><img src="/OpenCore-Install-Guide/assets/img/coolterm-connect.fb665577.png" alt="CoolTerm Connect"></p> <p>要记录，只需前往 <code>Connections -&gt; Capture to Text/Binary File -&gt; Start...(Cmd+R)</code>:</p> <p><img src="/OpenCore-Install-Guide/assets/img/coolterm-record.f7e0709b.png" alt=""></p> <h2 id="内核调试工具包-可选"><a href="#内核调试工具包-可选" class="header-anchor">#</a> 内核调试工具包(可选)</h2> <ul><li><a href="#kdk-on-an-installed-os">KDK on an Installed OS</a></li> <li><a href="#uninstalling-the-kdk">Uninstalling the KDK</a></li></ul> <p>内核调试工具包(kdk)是一种从内核和核心kext获取更多日志信息的好方法，kdk具体来说是苹果自己提供的macOS核心基础的调试版本。它们包括更多的日志记录和断言，允许您更直接地查看设置中的问题。但是请注意，我们不会讨论桥接调试或 <code>lldb</code> 的用法。</p> <p><span style="color:red;"> CAUTION: </span> Installing KDKs on work machines can lead to issues with OS updates as well as bricked installs. Please debug on dedicated macOS installs to avoid data loss</p> <p>To start, we'll first need a minimum of a <a href="https://developer.apple.com/support/compare-memberships/" target="_blank" rel="noopener noreferrer">free developer account<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from Apple. Once you've signed up for a minimum of a free tier, you can now access KDKs from the <a href="https://developer.apple.com/download/more/" target="_blank" rel="noopener noreferrer">More Downloads page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <ul><li>Note: Free tiers will be limited to release KDKs, only beta KDKs are provided for <a href="https://developer.apple.com/support/compare-memberships/" target="_blank" rel="noopener noreferrer">paid developer accounts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Note 2: Apple hosts KDKs as far back as OS X 10.5, Leopard so don't worry about your OS not being supported</li></ul> <p><img src="/OpenCore-Install-Guide/assets/img/more-downloads.edd8905d.png" alt=""></p> <p>To determine which KDK build you need with beta builds, run the following in terminal:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>sw_vers <span class="token operator">|</span> <span class="token function">grep</span> BuildVersion
</code></pre></div><p>For this, I will be downloading Kernel Debug Kit 11.3 build 20E5186d. Once downloaded, mount the disk image and you'll find the KDK installer. By default, the KDK will only install itself for &quot;Performing Two-Machine Debugging&quot; and will provide zero extra benefit on the host machine for kernel debugging by default.</p> <h3 id="kdk-on-an-installed-os"><a href="#kdk-on-an-installed-os" class="header-anchor">#</a> KDK on an Installed OS</h3> <p>To enable debugging on the host machine, you'll need to do the following:</p> <ol><li>Run the KDK Install pkg</li> <li>Disable SIP(OS X 10.11+)</li> <li>Mount root partition as writable(macOS 10.15+)</li> <li>Install debug kernel and kexts</li> <li>Update boot-args</li> <li>Reboot and check your work</li></ol> <h4 id="_1-run-the-kdk-install-pkg"><a href="#_1-run-the-kdk-install-pkg" class="header-anchor">#</a> 1. Run the KDK Install pkg</h4> <p>Simply run the pkg as normal:</p> <p><img src="/OpenCore-Install-Guide/assets/img/kdk-install.015e9b14.png" alt=""></p> <p>Once installed, you'll find the KDK components such as the debug kernel located at <code>/Library/Developer/KDKs</code>:</p> <p><img src="/OpenCore-Install-Guide/assets/img/kdk-installed.41bf377f.png" alt=""></p> <h4 id="_2-disabling-sip"><a href="#_2-disabling-sip" class="header-anchor">#</a> 2. Disabling SIP</h4> <ul><li>Applicable for OS X 10.11, El Capitan and newer</li></ul> <p>To disable SIP, users have 2 choices:</p> <ul><li><p>Disable via Recovery</p></li> <li><p><a href="/OpenCore-Install-Guide/troubleshooting/extended/post-issues.html#disabling-sip">Disable via config.plist</a></p></li></ul> <p>Generally we highly recommend recovery to easily revert with NVRAM reset, however some users may require SIP to be disabled through NVRAM wipes as well.</p> <p>For the former, simply reboot into macOS Recovery, open terminal and run the following:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>csrutil disable
csrutil authenticated-root disable <span class="token comment"># Big Sur+</span>
</code></pre></div><p>Reboot, and SIP will have been adjusted accordingly. You can run <code>csrutil status</code> in terminal to verify it worked.</p> <ul><li><span style="color:red;"> CAUTION: </span> For users relying on <a href="https://dortania.github.io/OpenCore-Post-Install/universal/security/applesecureboot.html#apecid" target="_blank" rel="noopener noreferrer">OpenCore's ApECID feature<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, please be aware this <strong>must</strong> be disabled to use the KDK.</li></ul> <h4 id="_3-mount-root-partition-as-writable"><a href="#_3-mount-root-partition-as-writable" class="header-anchor">#</a> 3. Mount root partition as writable</h4> <ul><li>Applicable for macOS 10.15, Catalina and newer</li></ul> <p>Mounting the root volume as writable is easy, however the process is a bit long:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Big Sur+</span>
<span class="token comment"># First, create a mount point for your drive</span>
<span class="token function">mkdir</span> ~/livemount

<span class="token comment"># Next, find your System volume</span>
diskutil list

<span class="token comment"># From the below list, we can see our System volume is disk5s5</span>
/dev/disk5 <span class="token punctuation">(</span>synthesized<span class="token punctuation">)</span>:
   <span class="token comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   <span class="token number">0</span>:      APFS Container Scheme -                      +255.7 GB   disk5
                                 Physical Store disk4s2
   <span class="token number">1</span>:                APFS Volume ⁨Big Sur HD - Data⁩       <span class="token number">122.5</span> GB   disk5s1
   <span class="token number">2</span>:                APFS Volume ⁨Preboot⁩                 <span class="token number">309.4</span> MB   disk5s2
   <span class="token number">3</span>:                APFS Volume ⁨Recovery⁩                <span class="token number">887.8</span> MB   disk5s3
   <span class="token number">4</span>:                APFS Volume ⁨VM⁩                      <span class="token number">1.1</span> MB     disk5s4
   <span class="token number">5</span>:                APFS Volume ⁨Big Sur HD⁩              <span class="token number">16.2</span> GB    disk5s5
   <span class="token number">6</span>:              APFS Snapshot ⁨com.apple.os.update-<span class="token punctuation">..</span>.⁩ <span class="token number">16.2</span> GB    disk5s5s

<span class="token comment"># Mount the drive(ie. disk5s5)</span>
<span class="token function">sudo</span> <span class="token function">mount</span> <span class="token parameter variable">-o</span> nobrowse <span class="token parameter variable">-t</span> apfs  /dev/disk5s5 ~/livemount

<span class="token comment"># Now you can freely make any edits to the System volume</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Catalina only</span>
<span class="token function">sudo</span> <span class="token function">mount</span> <span class="token parameter variable">-uw</span> /
</code></pre></div><h4 id="_4-install-debug-kernel-and-kexts"><a href="#_4-install-debug-kernel-and-kexts" class="header-anchor">#</a> 4. Install debug kernel and kexts</h4> <p>Now we install our KDK into the system:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Install KDK to System Volume</span>
<span class="token comment"># Ensure to replace &lt;KDK Version&gt;</span>
<span class="token comment"># For 10.15 and older, swap livemount with /Volumes/&lt;Target Volume&gt;</span>
<span class="token function">sudo</span> ditto /Library/Developer/KDKs/<span class="token operator">&lt;</span>KDK Version<span class="token operator">&gt;</span>/System ~/livemount/System

<span class="token comment"># Rebuild Truethe kernel cache(Big Sur and newer)</span>
<span class="token function">sudo</span> kmutil <span class="token function">install</span> --volume-root ~/livemount --update-all

<span class="token comment"># Rebuild the kernel cache(Catalina and older)</span>
<span class="token function">sudo</span> kextcache <span class="token parameter variable">-invalidate</span> /Volumes/<span class="token operator">&lt;</span>Target Volume<span class="token operator">&gt;</span>

<span class="token comment"># Finally, once done editing the system volume</span>
<span class="token comment"># we'll want to create a new snapshot (Big Sur and newer)</span>
<span class="token function">sudo</span> bless <span class="token parameter variable">--folder</span> ~/livemount/System/Library/CoreServices <span class="token parameter variable">--bootefi</span> --create-snapshot
</code></pre></div><h4 id="_5-update-boot-args"><a href="#_5-update-boot-args" class="header-anchor">#</a> 5. Update boot-args</h4> <p>Now that you've finished setting up the KDK and installed it, we now need to tell boot.efi which kernel to use. You have 2 options to choose from:</p> <ul><li><code>kcsuffix=debug</code> (removed with Big Sur)</li> <li><code>kcsuffix=development</code></li> <li><code>kcsuffix=kasan</code></li></ul> <p><code>development</code> arg will set the new default debug kernel in Big Sur, while <code>kasan</code> is a much more logging intensive kernel that incorporates <a href="https://github.com/google/sanitizers/wiki/AddressSanitizer" target="_blank" rel="noopener noreferrer">AddressSanitizer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Once you've decided which kernel is ideal for you, add the kcsuffix arg to your boot-args in your config.plist</p> <h4 id="_6-reboot-and-check-your-work"><a href="#_6-reboot-and-check-your-work" class="header-anchor">#</a> 6. Reboot and check your work</h4> <p>Assuming everything was done correctly, you'll now want to reboot and check that the correct kernel was booted:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sysctl</span> kern.osbuildconfig
 kern.osbuildconfig: kasan
</code></pre></div><p>And as we can see, we're successfully booting a KASAN kernel.</p> <h3 id="uninstalling-the-kdk"><a href="#uninstalling-the-kdk" class="header-anchor">#</a> Uninstalling the KDK</h3> <p>Uninstalling the KDK is fairly simple, however can be a bit destructive if not care.</p> <ol><li>Mount root partition as writable(macOS 10.15+)</li> <li>Remove debug kernel and kexts</li> <li>Re-enable SIP</li> <li>Clean boot-args</li> <li>Reboot and check your work</li></ol> <p>Steps:</p> <h4 id="_1-mount-root-partition-as-writable-macos-10-15"><a href="#_1-mount-root-partition-as-writable-macos-10-15" class="header-anchor">#</a> 1. Mount root partition as writable(macOS 10.15+)</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Big Sur+</span>
<span class="token comment"># First, create a mount point for your drive</span>
<span class="token comment"># Skip of still present from mounting volume last time</span>
<span class="token function">mkdir</span> ~/livemount

<span class="token comment"># Next, find your System volume</span>
diskutil list

<span class="token comment"># From the below list, we can see our System volume is disk5s5</span>
/dev/disk5 <span class="token punctuation">(</span>synthesized<span class="token punctuation">)</span>:
   <span class="token comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   <span class="token number">0</span>:      APFS Container Scheme -                      +255.7 GB   disk5
                                 Physical Store disk4s2
   <span class="token number">1</span>:                APFS Volume ⁨Big Sur HD - Data⁩       <span class="token number">122.5</span> GB   disk5s1
   <span class="token number">2</span>:                APFS Volume ⁨Preboot⁩                 <span class="token number">309.4</span> MB   disk5s2
   <span class="token number">3</span>:                APFS Volume ⁨Recovery⁩                <span class="token number">887.8</span> MB   disk5s3
   <span class="token number">4</span>:                APFS Volume ⁨VM⁩                      <span class="token number">1.1</span> MB     disk5s4
   <span class="token number">5</span>:                APFS Volume ⁨Big Sur HD⁩              <span class="token number">16.2</span> GB    disk5s5
   <span class="token number">6</span>:              APFS Snapshot ⁨com.apple.os.update-<span class="token punctuation">..</span>.⁩ <span class="token number">16.2</span> GB    disk5s5s

<span class="token comment"># Mount the drive (ie. disk5s5)</span>
<span class="token function">sudo</span> <span class="token function">mount</span> <span class="token parameter variable">-o</span> nobrowse <span class="token parameter variable">-t</span> apfs  /dev/disk5s5 ~/livemount
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Catalina only</span>
<span class="token function">sudo</span> <span class="token function">mount</span> <span class="token parameter variable">-uw</span> /
</code></pre></div><h4 id="_2-remove-debug-kernel-and-kexts"><a href="#_2-remove-debug-kernel-and-kexts" class="header-anchor">#</a> 2. Remove debug kernel and kexts</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Revert to old snapshot (Big Sur+)</span>
<span class="token function">sudo</span> bless <span class="token parameter variable">--mount</span> ~/livemount <span class="token parameter variable">--bootefi</span> --last-sealed-snapshot
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Reset kernel cache (Catalina and older)</span>
<span class="token function">sudo</span> <span class="token function">rm</span> /System/Library/Caches/com.apple.kext.caches/Startup/kernelcache.de*
<span class="token function">sudo</span> <span class="token function">rm</span> /System/Library/PrelinkedKernels/prelinkedkernel.de*
<span class="token function">sudo</span> kextcache <span class="token parameter variable">-invalidate</span> /
</code></pre></div><h4 id="_3-re-enable-sip"><a href="#_3-re-enable-sip" class="header-anchor">#</a> 3. Re-enable SIP</h4> <ul><li>Recovery commands(if previously changed via recovery):</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>csrutil <span class="token builtin class-name">enable</span>
csrutil authenticated-root <span class="token builtin class-name">enable</span> <span class="token comment"># Big Sur+</span>
</code></pre></div><ul><li>config.plist changes(if previously changed via config.plist):
<ul><li><a href="/OpenCore-Install-Guide/troubleshooting/extended/post-issues.html#disabling-sip">Enabling via config.plist</a></li></ul></li></ul> <h4 id="_4-clean-boot-args"><a href="#_4-clean-boot-args" class="header-anchor">#</a> 4. Clean boot-args</h4> <p>Don't forget to remove <code>kcsuffix=</code> in your boot-args</p> <h4 id="_5-reboot-and-check-your-work"><a href="#_5-reboot-and-check-your-work" class="header-anchor">#</a> 5. Reboot and check your work</h4> <p>Assuming everything was done correctly, you'll now want to reboot and check that the correct kernel was booted:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sysctl</span> kern.osbuildconfig
 kern.osbuildconfig: release
</code></pre></div><p>And as we can see, we're successfully booting a KASAN kernel.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/sumingyd/OpenCore-Install-Guide/edit/master/troubleshooting/kernel-debugging.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/1/31 01:58:49</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ⟵
      <a href="/OpenCore-Install-Guide/troubleshooting/boot.html" class="prev">
        了解macOS引导过程
      </a></span> <span class="next"><a href="https://sumingyd.github.io/OpenCore-Post-Install/" target="_blank" rel="noopener noreferrer">
        Post-Install

        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
      ⟶
    </span></p></div> </main></div><div class="global-ui"><div style="visibility:hidden;display:none;"></div><!----></div></div>
    <script src="/OpenCore-Install-Guide/assets/js/app.94d52619.js" defer></script><script src="/OpenCore-Install-Guide/assets/js/2.f12e51c6.js" defer></script><script src="/OpenCore-Install-Guide/assets/js/8.f75ba59f.js" defer></script><script src="/OpenCore-Install-Guide/assets/js/58.29b7a45b.js" defer></script>
  </body>
</html>
